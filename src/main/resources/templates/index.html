<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<!--     <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/> -->
<!--     <meta name="viewport" content="width=device-width, initial-scale=1.0"/> -->
<!--     <meta name="description" content=""/> -->
<!--     <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/> -->
    <title>DedupEndNote</title>


	<script th:src="@{/webjars/jquery/jquery.min.js}"></script>
	<script th:src="@{/webjars/jquery-ui/jquery-ui.min.js}"></script>
	<script th:src="@{/webjars/blueimp-file-upload/js/jquery.fileupload.js}"></script>
	<script th:src="@{/webjars/blueimp-file-upload/js/jquery.fileupload-process.js}"></script>
	<link rel="stylesheet" th:href="@{/webjars/bootstrap/css/bootstrap.min.css}">
    
	<script th:src="@{/webjars/bootstrap/js/bootstrap.bundle.min.js}" type="text/javascript"></script>
    <style type="text/css">
    	td {
    		vertical-align: top;
    	}
    	.diff {
    		color: red;
    		font-weight: bold;
    	}
		.bar {
		    height: 18px;
		    background: light-green;
		}
    </style>
 	<script th:inline="javascript">
 		$(function() {
			$('#file').change(function () {
				// solution for "fakepath" problem: remove everything before the fileName
				var fileName = $("#file").val();
				var myRegex = /^(.+\\)([^\\]+)$/;
				var match = myRegex.exec(fileName);
				if (match != null) {
					fileName = match[2];
				}
				// alert("fileName: " + fileName);
 		    	$("#fileName").val(fileName);
			});
 			
 			$('#file').fileupload({
				dataType: 'json',
				limitMultiFileUploads: 1,
				replaceFileInput: false,
				start: function() {
					$('#progress .progress-bar').css('width', '0%');
					$('#results').html("<span>In progress</span>");
					$('#reportLink').addClass("hidden");
					$('#reportLink').html("<span></span>");
					// $('#getResultFile_form').addClass("hidden");
					$('#getResultFile_form').hide();
				},
				add: function(event, data) {
					if (data.files[0].size > (150 * 1024 * 2014)) {
						var MB = parseInt(data.files[0].size / (1024 * 1024));
						alert("File is bigger than 150 MB! This file: " + MB + "MB");
					} else {
						data.submit();
					}
				},
		 		done: function (e, data) {
 		        	// console.log("done reached: %o", data);
	    			$("#markModeResultFile").val($("input[name='markMode']").prop("checked"));
 		        	if (data.textStatus == "success") {
 		        		$('#results').html("<span>File " + data.files[0].name + " has been uploaded. Deduplication started ....</span>");
 		        		$('#results').removeClass('alert-danger');
 		        		$('#results').addClass('alert-success');
 		        		$('#reportLink').removeClass("hidden");
 		        		$('#reportLink').addClass('show');
 		        		$('#reportLink').addClass('alert-danger');
 		        		$('#reportLink').removeClass('alert-success');
	 		   	        var timer = setInterval(function() {  
	 			            $.ajax({  
	 			                  url: 'recordstatus.json',
	 			                  dataType: 'json',
	 			                  success: function(response) {
	 			                    if (response.result.match("^DONE")) {  
	 			 		        		$('#reportLink').removeClass('alert-danger');
	 			 		        		$('#reportLink').addClass('alert-success');
	 			                        $('#reportLink').html(response.result);      
	 			                        clearInterval(timer);
// 	 			                        $("#getResultFile_form").removeClass("hidden");
// 	 			                        $("#getResultFile_form").addClass("show");
		 			   					$('#getResultFile_form').show();
	 			                    } else if (response.result.match("^ERROR")) {  
		 			 		        		$('#reportLink').removeClass('alert-danger');
		 			 		        		$('#reportLink').addClass('alert-danger');
		 			                        $('#reportLink').html(response.result);      
		 			                        clearInterval(timer);
	 			                    } else {
	 				                  	// console.log("DATA: " + response.result);
	 			                    	$('#reportLink').html(response.result);
	 			                    }
	 		                  	}
	 			            });  
	 			        }, 2000);  
 		        	}
 		        },
 		        error: function (jqXHR, data, thrownError) {
 		        	console.log("error arg1 reached: %o", jqXHR.responseText);
 		        	console.log("error arg2 reached: %o", data.textStatus);
 		        	console.log("error arg3 reached: %o", thrownError);
 		        	var response = jQuery.parseJSON(jqXHR.responseText);
	        		$('#results').html("<span>" + response.result + "</span>");
		            $('#progress .progress-bar').css('width', '0%');
 	        		$('#results').addClass('alert-danger');
 	        		$('#results').removeClass('alert-success');
 		        },
  				progressall: function (e, data) {
 		            var progress = parseInt(data.loaded / data.total * 100, 10);
 		            console.log("Progress: " + progress);
 		            $('#progress .progress-bar').css(
 		                'width',
 		                progress + '%'
 		            );
 		        }
 		    });
 		});
 	</script>
</head>
<body data-spy="scroll" data-target="#menu" data-offset="1">
	<div class="container-fluid">
		<div class="row">
			<div class="col-3">
				<nav id="menu" class="navbar navbar-light bg-light" style="position: fixed;">
					<nav class="nav nav-pills flex-column small">
						<a class="list-group-item list-group-item-action" href="#start">Top</a>
						<a class="list-group-item list-group-item-action" href="#steps">Steps</a>
						<a class="list-group-item list-group-item-action" href="#why">Why DedupEndNote?</a>
						<a class="list-group-item list-group-item-action" href="#what">What does DedupEndNote do?</a>
						<a class="list-group-item list-group-item-action" href="#markModeText">Mark mode</a>
						<a class="list-group-item list-group-item-action" href="#examples">Examples of comparison</a>
						<a class="list-group-item list-group-item-action" href="#test">Test results</a>
						<a class="list-group-item list-group-item-action" href="#limitations">Limitations</a>
						<a class="list-group-item list-group-item-action" href="/justification">Justification</a>
						<a class="list-group-item list-group-item-action" href="/faq">FAQ</a>
						<a class="list-group-item list-group-item-action" href="/developers">Developers</a>
					</nav>
				</nav>
			</div>
			<div class="col-9" style="height: 100vh; position: relative;">
				<h1 id="start">DedupEndNote (version 0.9.4 20210411)</h1>
				<div class="card bg-light mb-3">
					<div class="card-body">
						<form class="form-horizontal" id="upload_form" method="post" enctype="multipart/form-data" th:action="@{|/upload|}">
							<p>Select an EndNote RIS file (local file, max. file size: 150MB).<br/>
							See <a href="/twofiles">/twofiles</a> to deduplicate a new file against an existing file / EndNote database.</p>
							<div class="form-check form-check-inline" style="margin-left: 20px;">
								<input class="form-check-input" type="checkbox" id="markMode" name="markMode"/>
								<label class="form-check-label" for="file"> Do NOT deduplicate but mark the duplicate records (see <a href="#markModeText">Mark mode</a>)</label>
							</div>
							<div class="form-group" style="margin-left: 20px;">
<!-- 								<label for="file">Select an EndNote RIS file (local file, max. file size: 150MB).<br/> -->
<!-- 								See <a href="/twofiles">/twofiles</a> to deduplicate a new file against an existing file / EndNote database.</label> -->
								<input type="file" id="file" name="file" class="form-control-file"/>
							</div>
						    <div id="progress" class="progress">
						        <div class="progress-bar progress-bar-success"></div>
						    </div>						
			  				<p id="results" class="alert-danger"> </p>
							<p id="reportLink" class="alert-danger"> </p>
						</form>
						<form class="form-horizontal" style="display: none;" id="getResultFile_form" method="post" th:action="@{|/getResultFile|}">
							<input type="hidden" name="fileName" id="fileName" />
							<input type="hidden" name="markModeResultFile" id="markModeResultFile" />
							<!-- nodig om submit() voor IE te laten werken -->
							<button type="submit" class="btn btn-primary mb-2" onclick="this.form.submit()">Get the result</button>
						</form>
					</div>
				</div>
	        	<h3 id="steps">Steps</h3>

	        	<ol>
	        		<li>Deduplicate one file:
			        	<ul>
			        		<li>export an EndNote database into a file in RIS format</li>
			        		<li>upload this file in DedupEndNote</li>
			        		<li>save the results file with deduplicated records</li>
			        		<li>import this results file into a new EndNote database</li>  
			        	</ul>
			        </li>
			        <li>Deduplicate a new file against an existing file / EndNote database: see <a href="/twofiles">/twofiles</a></li>
	        	</ol>
		        	
	        	<h3 id="why">Why DedupEndNote?</h3>

	        	<p>Deduplication in EndNote misses many duplicate records. Building and maintaining a Journals List within Endnote can partly solve this
	        	problem, but there remain lots of cases where EndNote is too unforgiving when comparing records. Some bibliographic databases offer deduplication
	        	for their own databases (OVID: Medline and EMBASE), but this does not help PubMed, Cochrane or Web of Science users.</p>
	        	<p>DedupEndNote deduplicates an EndNote RIS file and writes a new RIS file with the unique records, which can be imported into a new EndNote database.
	        	It is more forgiving than EndNote itself when comparing records,
	        	but tests have shown that it identifies many more duplicates (see below under "Test results").</p>
	        	<p>The program has been tested on EndNote databases with records from:</p>
	        	<ul>
	        		<li>CINAHL (EBSCOHost)</li>
	        		<li>Cochrane Library (Trials)</li>
	        		<li>EMBASE (OVID)</li>
	        		<li>Medline (OVID)</li>
	        		<li>PsycINFO (OVID)
	        		<li>PubMed</li>
	        		<li>Scopus</li>
	        		<li>Web of Science</li>
	        	</ul>
	        	
		        <h3 id="what">What does DedupEndNote do?</h3>
		        
		        <p>Each pair of records is compared in 5 different ways. The general rule is:</p>
		        <table class="table table-bordered" style="width: 60%;">
		        	<thead>
		        		<tr>
		        			<th>Comparison</th>
		        			<th>Result</th>
		        			<th>Action</th>
		        		</tr>
		        	</thead>
		        	<tbody>
		        		<tr>
		        			<td rowspan="3">1 ... 5</td>
		        			<td>YES</td>
		        			<td rowspan="2" class="align-middle">go to next comparison if present,<br/>else mark the records as duplicates</td>
		        		</tr>
		        		<tr>
		        			<td>(insufficient data for comparison)</td>
		        		</tr>
		        		<tr>
		        			<td>NO</td>
		        			<td>stop comparisons for this pair of record</td>
		        		</tr>
		        	</tbody>
		        </table>

		        <p>The following comparisons are used (in this order, chosen for performance reasons):</p>
		        <ol>
		        	<li><strong>Publication year:</strong> Are they at most 1 year apart?<br/>
<!-- 		        	We use a sliding window technique: records are put into sets of publication years, the records of each set are compared with the record from the same set -->
<!-- 		        	and the set of the following publication year.<br/> -->
		        	<i>Insufficient data: Records without a publication year are compared to all records unless they have been identified as a duplicate.</i></li>
		        	
	 				<li><strong>Starting page or DOI:</strong> Are they the same?<br/>
		 				If the starting pages are different or one or both are absent, the DOIs are compared.<br/>
				        <i>Preprocessing: Article number is treated as a starting page if starting page itself is empty or contains "-".</i><br/>
				        <i>Preprocessing: Starting pages are compared only for number: "S123" and "123" are considered the same.</i><br/> 
				        <i>Preprocessing: In DOIs 'http://dx.doi.org/', 'http://doi.org/', ... are left out.</i><br/>
				        <i>Insufficient data: If one or both DOIs are missing and one or both of the starting pages are missing, the answer is YES. This is important because of PubMed ahead of print publications.</i>
			        </li>
	
			        <li><strong>Authors:</strong> Is the <a href="https://en.wikipedia.org/wiki/Jaro%E2%80%93Winkler_distance" target="_blank">Jaro-Winkler similarity</a> of the authors &gt;
			        	<span th:text="${T(edu.dedupendnote.services.DeduplicationService.DefaultAuthorsComparator).AUTHOR_SIMILARITY_NO_REPLY}">-0.67</span>?<br/>
				        <i>Preprocessing: The author "Anonymous," is treated as no author.</i><br/>
				        <i>Preprocessing: First names are reduced to initials ("Moorthy, Ranjith K." to "Moorthy, R. K.").</i><br/> 
				        <i>Preprocessing: All authors from each record are joined by "; ".</i><br/>
				        <i>Insufficient data: If one or both records have no authors, the answer is YES (except if one of the records is a reply (see below)
				        and one of the records has no starting page or DOI).</i>
				     </li>
	
			        <li><strong>Title:</strong> Is the <a href="https://en.wikipedia.org/wiki/Jaro%E2%80%93Winkler_distance" target="_blank">Jaro-Winkler similarity</a> of (one of) the normalized titles &gt;
						<span th:text="${T(edu.dedupendnote.services.DeduplicationService).TITLE_SIMILARITY_SUFFICIENT_STARTPAGES_OR_DOIS}">-0.90</span>?<br/>
				        The fields Original publication (OP), Short Title (ST), Title (TI) and sometimes Book section (T3, see below) are treated as titles.<br/>
				        Because the Jaro-Winkler similarity algorithm puts a heavy penalty on differences at the beginning of a string, the normalized titles are also reversed.<br/>
				        <i>Preprocessing: The titles are normalized (converted to lower case, text between "&lt;...&gt;" removed,
				        all characters which are not letters or numbers are replaced by a space character, ...).</i><br/>
				        <i>Insufficient data: If one of the records is a reply (see below), the titles are not compared / the answer is YES
				        (but the Jaro-Winkler similarity of the authors should be &gt; <span th:text="${T(edu.dedupendnote.services.DeduplicationService.DefaultAuthorsComparator).AUTHOR_SIMILARITY_REPLY_SUFFICIENT_STARTPAGES_OR_DOIS}">-0.75</span>
				        and the comparison between the journals is more strict).</i>
				    </li>
	
			        <li><strong>ISSN or Journal:</strong> Are they the same (ISSN) or similar (Journal)?<br/>
				        The fields Journal / Book Title (T2), Alternate Journal (J2) and sometimes Book section (T3, see below) are treated as journals, ISBNs as ISSNs. All ISSns and journal titles (including abbreviations) in the records are used.<br/>
				        Abbreviated and full journal titles are compared in a sensible way (see examples below).<br/>
				        If the ISSns are different or one or both records have no ISSN, the journals are compared.<br/>
				        <i>Preprocessing: ISSNs are normalized (dash between position 4 and 5 for ISSN, no dashes in ISBNs, both uppercased).</i><br/>
				        <i>Preprocessing: Journal titles of the form "Zhonghua wai ke za zhi [Chinese journal of surgery]"
				        or "Zhonghua wei chang wai ke za zhi = Chinese journal of gastrointestinal surgery"
				        or "The Canadian Journal of Neurological Sciences / Le Journal Canadien Des Sciences Neurologiques" are split into 2 journal titles.</i><br/>
				        <i>Preprocessing: the journal titles are normalized (hyphens, dots and apostrophes are replaced with space,
				        end part between round or square brackets is removed, initial article is removed, ...).</i>
			        </li>
		        </ol>
		        
		        <p>If two records get 5 YES answers, they are considered duplicates.<br/> 
		        Only the first record of a set of duplicate records is copied to the output file.</p>
		        <p>Moreover: When writing the output file, the following fields can be changed:</p>
		        <ul>
		        	<li>Author (AU):
		        		<ul>
		        			<li>if the (only) author is "Anonymous", the author is omitted</li>
		        		</ul>
		        	</li>
		        	<li>DOI (DO):
		        		<ul>
		        			<li>the DOIs of the removed duplicate records are copied to the saved record and deduplicated. The DOI field is important for finding the full text in EndNote.</li>
		        			<li>DOIs of the form "10.1038/ctg.2014.12", "http://dx.doi.org/10.1038/ctg.2014.12", ... are rewritten in the
		        	 			<a href="https://www.crossref.org/education/metadata/persistent-identifiers/doi-display-guidelines/" target="_blank">prescribed form</a> "https://doi.org/10.1038/ctg.2014.12". DOIs of this form are clickable links in EndNote.</li>
		        		</ul>
		        	</li>
		        	<li>Publication year (PY):
		        		<ul>
		        			<li>if the saved record has no value for its Publication year but one of the removed duplicate records has,
		        				the first not empty Publication year of the duplicates is copied to the saved record.</li>
		        		</ul>
		        	</li>
		        	<li>Starting page (SP) and Article Number (C7):
		        		<ul>
		        			<li>the article number is put in the Pages field (SP) if the Pages field is empty or does not contain a "-", overwriting the Pages field content.</li>
		        			<li>the article number field (C7) is omitted</li>
		        			<li>if the saved record has no value for its Pages field (e.g. PubMed ahead of print publications) but one of the removed duplicate records has,
		        				the first not empty pages of the duplicates are copied to the saved record.</li>
		        			<li>the Pages field gets an unabbreviated form: e.g. "482-91" is rewritten as "482-491".</li>
		        			<li>if the ending page is the same as the starting page, only the starting page is written ("192" instead of "192-192").</li>
		        		</ul>
		        	</li>
		        	<li>Title (TI):
		        		<ul>
		        			<li>If the publication is a reply, the title is replaced with the longest title from the duplicates (e.g. "Reply from the authors" is replaced by
		        			 	"Coagulation parameters and portal vein thrombosis in cirrhosis Reply")</li>
		        		</ul>
		        	</li>
		        </ul>
		        
		        <p>The output file is a new RIS file which can be imported into a new EndNote database.</p>
		        
		        <p>DedupEndNote is slower than EndNote in deduplicating records because its comparisons are more time consuming.
		        EndNote can deduplicate a EndNote database of ca. 15,000 records in less dan 5 seconds. DedupEndNote needs around 20 seconds to deduplicate
		        the export file in RIS format (115MB).</p>
				
				<p><i>T3 field: Especially EMBASE (OVID) uses this field for (1) Conference title (majority of cases), (2) an alternative journal title, and (3) original (non English) title. Case 1 (identified as containing a
				number or "Annual", "Conference", "Congress", "Meeting" or "Society") is skipped. All other T3 fields are treated as Journals and as titles.</i>
   				
   				<p><i>Reply: a publication is considered a reply if the title (field TI) contains "reply", or contains "author(...)respon(...)", or is nothing but "response" (all case insensitive).</i></p>
   				
		        <p>DedupEndNote has borrowed several ideas from: Yu Jiang, Can Lin, Weiyi Meng, Clement Yu, Aaron M. Cohen and Neil R. Smalheiser:
		        <a href="http://www.ncbi.nlm.nih.gov/pmc/articles/PMC3893659/" target="_blank">Rule-based deduplication of article records from bibliographic databases</a>, in: Database 2014, ID bat086, doi:10.1093/database/bat086</p>
		        
		        <h3 id="markModeText">Mark mode</h3>
		        
		        <p>In Mark mode the ID of the first record of a set of duplicate records is copied to the label field ("LB") of all duplicate records.
		        The input file is copied to the output file with the addition of the Label field if it is not empty.
		        The original content of the Label field is overwritten! All other fields are copied as is (so no prescribed form of DOI, ...).</p>
		        
				<p>After importing the results file into a new EndNote database, make the Label field visible. To see the duplicates, search for "Label" "is greater than" 0, and sort on the label field.
				The IDs in the Label field refer to the IDs of the original EndNote database.</p>
				
				<p>Comparing the results of deduplication by EndNote itself and DedupEndNote:</p>
				<ul>
					<li>Import the result file into a new EndNote database</li>
					<li>Deduplicate by EndNote itself</li>
					<li>Select all records in the "Duplicate References" set, and mark them as Read</li>
					<li>Select the "All References" set, limit to the duplicates found by DedupEndNote (search for "Label" "is greater than" 0), and sort on the label field.</li>
					<li>The records marked as Unread were identified as duplicates by DedupEndNote, but not by EndNote itself.</li>
					<li>Select the "All References" set, limit to the duplicates not found by DedupEndNote (search for "Label" "is less than" 0).</li>
					<li>The records marked as Read were identified as duplicates by EndNote itself, but not by DedupEndNote.</li>
				</ul>
		        
		        <h3 id="examples">Examples of comparison</h3>
		        
		        <p>In the following table the results of EndNote's Find duplicates is compared to the comparisons in DedupEndNote. For these tests only one field was 
		        selected in EndNote in "Edit&nbsp;&gt;&nbsp;Preferences&nbsp;&gt; Duplicates", and "Ignore spacing and punctuation" was selected.</p>
		        <table class="table table-sm">
		        	<thead class="thead-light">
		        		<tr>
			        		<th>Field</th>
			        		<th>Examples</th>
			        		<th>EndNote finds duplicates</th>
			        		<th>DedupEndNote Score</th>
			        	</tr>
		        	</thead>
		        	<tbody>
		        		<tr>
		        			<td><span style="color:red;">Starting page and article number</span></td>
		        			<td>
		        				<ul>
		        					<li>...</li>
		        					<li>...</li>
								</ul>
							</td>
							<td>???</td>
							<td>???</td>
						</tr>
		        		<tr>
		        			<td>Title</td>
		        			<td>
		        				<ul>
		        					<li>90Y radioembolization using resin microspheres in patients with hepatocellular carcinoma and portal vein thrombosis</li>
									<li>90Y RADIOEMBOLIZATION USING RESIN MICROSPHERES IN PATIENTS WITH HEPATOCELLULAR CARCINOMA AND PORTAL VEIN THROMBOSIS</li>
								</ul>
							</td>
							<td>Yes</td>
							<td>1.00 == Yes</td>
						</tr>
		        		<tr>
		        			<td>Title</td>
		        			<td>
		        				<ul>
		        					<li>Comments about Glisson<span class="diff">'s</span> capsule phleboliths and portal vein thrombosis<span class="diff"> [1]</span></li>
									<li>COMMENTS ABOUT GLISSON CAPSULE PHLEBOLITHS AND PORTAL-VEIN THROMBOSIS</li>
								</ul>
							</td>
							<td>No</td>
							<td>0.92 == Yes</td>
						</tr>
		        		<tr>
		        			<td>Title</td>
		        			<td>
		        				<ul>
		        					<li>Transarterial chemoembolization and <span class="diff">&lt;sup&gt;90&lt;/sup&gt;y</span> radioembolization for hepatocellular carcinoma: Review of current applications beyond intermediate-stage disease</li>
									<li>Transarterial Chemoembolization and <span class="diff">Y-90</span> Radioembolization for Hepatocellular Carcinoma: Review of Current Applications Beyond Intermediate-Stage Disease</li>
								</ul>
							</td>
							<td>No</td>
							<td>0.92 == Yes</td>
						</tr>
		        		<tr>
		        			<td>Title</td>
		        			<td>
		        				<ul>
		        					<li>Epidemiology and diagnosis profile of digestive cancer in teaching hospital campus of lome: About 250 cases.<span class="diff"> [French]</span></li>
									<li>Epidemiology and diagnosis profile of digestive cancer in teaching Hospital Campus of Lome: about 250 cases</li>
								</ul>
							</td>
							<td>No</td>
							<td>0.99 == Yes</td>
						</tr>
		        		<tr>
		        			<td>Title</td>
		        			<td>
		        				<ul>
		        					<li>Post Splenectomy Outcome in <span class="diff">beta</span>-Thalassemia</li>
									<li>Post Splenectomy Outcome in <span class="diff">β</span>-Thalassemia</li>
								</ul>
							</td>
							<td>No</td>
							<td>0.96 == Yes</td>
						</tr>
		        		<tr>
		        			<td>Title</td>
		        			<td>
		        				<ul>
		        					<li>Letter: portal vein obstruction<span class="diff">--</span>which subset of patients could benefit the most?<span class="diff"> Authors' reply</span></li>
									<li>Letter: Portal vein obstruction<span class="diff"> - </span>Which subset of patients could benefit the most?</li>
								</ul>
							</td>
							<td>No</td>
							<td>0.97 == Yes *</td>
						</tr>
		        		<tr>
		        			<td>Title</td>
		        			<td>
		        				<ul>
		        					<li>Title: <span class="diff">Some diseases associated with ulcero- hemorrhagic colitis: complication or coincidence. [French]</span><br/>
		        					Original Title: Quelques maladies associees a la colite ulcero- Hemorragique: Complications ou coincidences</li>
									<li>Title: <span class="diff">[Various diseases associated with ulcero-hemorrhagic colitis: complications or coincidences]</span><br/>
									Original Title: Quelques maladies associees a la colite ulcero-hemorragique: complications ou coincidences.</li>
								</ul>
							</td>
							<td>No</td>
							<td>1.00 == Yes *</td>
						</tr>
		        		<tr>
		        			<td>Title</td>
		        			<td>
		        				<ul>
		        					<li>Title: <span class="diff">[HELLP in the second trimester in a patient with antiphospholipid syndrome]</span><br/>
		        					Original Title: HELLP kan ses i andet trimester ved antifosfolipidsyndrom.</li>
									<li>Title: <span class="diff">HELLP kan ses i andet trimester ved antifosfolipidsyndrom</span></li>
								</ul>
							</td>
							<td>No</td>
							<td>1.00 == Yes *</td>
						</tr>
		        		<tr>
		        			<td>Title</td>
		        			<td>
		        				<ul>
		        					<li>Title: <span class="diff">NFkappaB</span> inhibition decreases hepatocyte proliferation but does not alter apoptosis in obstructive jaundice<br/>
		        					Reversed Title: ecidnuaj evitcurtsbo ni sisotpopa retla ton seod tub noitarefilorp etycotapeh sesaerced noitibihni <span class="diff">BappakFN</span></li>
									<li>Title: <span class="diff">NF kappa B</span> inhibition decreases hepatocyte proliferation but does not alter apoptosis in obstructive jaundice<br/>
									Reversed title: ecidnuaj evitcurtsbo ni sisotpopa retla ton seod tub noitarefilorp etycotapeh sesaerced noitibihni <span class="diff">B appak FN</span></li>
								</ul>
							</td>
							<td>No</td>
							<td>1.00 == Yes *</td>
						</tr>
		        		<tr>
		        			<td>Title</td>
		        			<td>
		        				<ul>
		        					<li>Title: <span class="diff">Case report. </span>Duplication of the portal vein: a rare congenital anomaly<br/>
		        					Reversed Title: ylamona latinegnoc erar a :niev latrop eht fo noitacilpuD<span class="diff"> .troper esaC</span></li>
									<li>Title: Duplication of the portal vein - A rare congenital anomaly<br/>
									Reversed title: ylamona latinegnoc erar A - niev latrop eht fo noitacilpuD</li>
								</ul>
							</td>
							<td>No</td>
							<td>0.96 == Yes *</td>
						</tr>
		        		<tr>
		        			<td>Title</td>
		        			<td>
		        				<ul>
		        					<li>Title: <span class="diff">La sémantique de l'image radiologique. </span>Int<span class="diff">é</span>r<span class="diff">ê</span>t du proc<span class="diff">é</span>d<span class="diff">é</span> de soustraction <span class="diff">é</span>lectronique en couleurs d'Oosterkamp en angiographie abdominale<br/>
		        					Reversed Title: elanimodba eihpargoigna ne pmakretsoO'd srueluoc ne euqinortcel<span class="diff">é</span> noitcartsuos ed <span class="diff">é</span>d<span class="diff">é</span>corp ud t<span class="diff">ê</span>r<span class="diff">é</span>tnI<span class="diff"> .euqigoloidar egami'l ed euqitnamés aL</span></li>
									<li>Title: INTERET DU PROCEDE DE SOUSTRACTION ELECTRONIQUE EN COULEURS D'OOSTERKAMP EN ANGIOGRAPHIE ABDOMINALE<br/>
									Reversed title: ELANIMODBA EIHPARGOIGNA NE PMAKRETSOO'D SRUELUOC NE EUQINORTCELE NOITCARTSUOS ED EDECORP UD TERETNI</li>
								</ul>
							</td>
							<td>No</td>
							<td>0.91 == Yes *</td>
						</tr>
						<tr>
							<td>Authors</td>
							<td>
								<ul>
									<li><span class="diff">Cobos</span> Mateos, J. M.; <span class="diff">Aguinaga</span> Manzanos, M. V.; <span class="diff">Casas</span> Pinillos, M. S.;
									 <span class="diff">Gonzalez</span> Conde, R.; <span class="diff">Gonzalez</span> Sanchez, J. A.; <span class="diff">De Miguel Velasco</span>, J. E.;
									  <span class="diff">Soleto</span> Saez, E.; <span class="diff">Suarez</span> Mier, M. P.</li>
									<li>Mateos, J. M. <span class="diff">C.</span>; Manzanos, M. V. <span class="diff">A.</span>; Pinillos, M. S. <span class="diff">C.</span>;
									 Conde, R. <span class="diff">G.</span>; Sanchez, J. A. <span class="diff">G.</span>; Velasco, J. E. <span class="diff">D.</span>;
									 Saez, E. <span class="diff">S.</span>; Mier, M. P. <span class="diff">S.</span></li>
								</ul>
							</td>
							<td>No</td>
							<td>0.75 == Yes</td>
						</tr>
						<tr>
							<td>Authors</td>
							<td>
								<ul>
									<li>Danil<span class="diff">ă</span>, M.; Sporea, I.; Popescu, A.; <span class="diff">ş</span>irli, R.</li>
									<li>Danil<span class="diff">a</span>, M.; Sporea, I.; Popescu, A.; <span class="diff">S</span>irli, R.</li>
								</ul>
							</td>
							<td>No</td>
							<td>0.93 == Yes</td>
						</tr>
						<tr>
							<td>Authors</td>
							<td>
								<ul>
									<li>Lv, Y.; Qi, X.; Xia, J.; Fan, D.; Han, G.</li>
									<li>Lv, Y.; Qi, X. <span class="diff">S.</span>; Xia, J. <span class="diff">L.</span>; Fan, D. <span class="diff">M.</span>; Han, G. <span class="diff">H.</span></li>
								</ul>
							</td>
							<td>No</td>
							<td>0.90 == Yes</td>
						</tr>
						<tr>
							<td>Authors</td>
							<td>
								<ul>
									<li>[empty]</li>
									<li><span class="diff">Anonymous,</span></li>
								</ul>
							</td>
							<td>No</td>
							<td>Yes</td>
						</tr>
						<tr>
							<td>Journal</td>
							<td>
								<ul>
									<li>Br<span class="diff">itish</span> j<span class="diff">ournal of</span> surg<span class="diff">ery</span></li>
									<li>Br J Surg</li>
								</ul>
							</td>
							<td>No</td>
							<td>Similar == Yes</td>
						</tr>
						<tr>
							<td>Journal</td>
							<td>
								<ul>
									<li>European Journal of Gastroenterology <span class="diff">and</span> Hepatology</li>
									<li>European Journal of Gastroenterology <span class="diff">&amp;</span> Hepatology</li>
								</ul>
							</td>
							<td>No</td>
							<td>Similar == Yes</td>
						</tr>
						<tr>
							<td>Journal + ISSN</td>
							<td>
								<ul>
									<li><span class="diff">Japanese Journal of Cancer and Chemotherapy</span> [ISSN: 2690-2692]</li>
									<li><span class="diff">Gan To Kagaku Ryoho</span> [ISSN: 2690-2692]</li>
								</ul>
							</td>
							<td>No</td>
							<td>Similar == Yes</td>
						</tr>
						<tr>
							<td>Journal</td>
							<td>
								<ul>
									<li>JAMA</li>
									<li>J<span class="diff">ournal of the</span> A<span class="diff">merican</span> M<span class="diff">edical</span> A<span class="diff">ssociation</span></li>
								</ul>
							</td>
							<td>No</td>
							<td>Similar == Yes</td>
						</tr>
						<tr>
							<td>Journal</td>
							<td>
								<ul>
									<li><span class="diff">The</span> Lancet Haematol<span class="diff">ogy</span></li>
									<li>Lancet Haematol</li>
								</ul>
							</td>
							<td>No</td>
							<td>Similar == Yes</td>
						</tr>
						<tr>
							<td>Journal</td>
							<td>
								<ul>
									<li>Hepatology</li>
									<li>Hepatology <span class="diff">International</span></li>
								</ul>
							</td>
							<td>No</td>
							<td>Similar == Yes *</td>
						</tr>
						<tr>
							<td>Journal</td>
							<td>
								<ul>
									<li>AJR Am J Roentgenol</li>
									<li>Am<span class="diff">erican</span> J<span class="diff">ournal of</span> Roentgenol<span class="diff">ogy</span></li>
								</ul>
							</td>
							<td>No</td>
							<td>Similar == Yes</td>
						</tr>
						<tr>
							<td>Journal</td>
							<td>
								<ul>
									<li><span class="diff">British journal of</span> surgery</li>
									<li>Surgery</li>
								</ul>
							</td>
							<td>No</td>
							<td>NOT similar == No</td>
						</tr>
					</tbody>
				</table>
				<p>*: In these cases the comparison of DedupEndNote for this content for this field is not accurate. However, the comparison of the other fields
				for these records does not result in YES answers, so the records are ultimately not considered duplicates.</p>
	
				<h3 id="test">Test results</h3>

				<h4>Own test database: portal vein thrombosis (52,828 records) </h4>
				<p>See <a href="/test_results_details">Test results - details</a> for a description of this test database.</p>				
							
				<table class="table table-sm">
					<thead>
						<tr>
							<th>Tool</th>
							<th>Setting</th>
							<th class="text-right">Duplicates found</th>
							<th class="text-right">Duplicates to delete</th>
							<th class="text-right">After deduplication</th>
							<th class="text-right">% kept</th>
						</tr>
					</thead>
					<tr>
						<td>EndNote</td>
						<td>Author + Year + Title + Reference Type<br/>(default setting)</td>
						<td class="text-right">32,891</td>
						<td class="text-right">19,959</td>
						<td class="text-right">32,869</td>
						<td class="text-right">62%</td>
					</tr>
					<tr>
						<td>EndNote</td>
						<td>Author + Year + Title</td>
						<td class="text-right">32,920</td>
						<td class="text-right">19,976</td>
						<td class="text-right">32,852</td>
						<td class="text-right">62%</td>
					</tr>
					<tr>
						<td>EndNote</td>
						<td>Author + Year + Title + Secondary Title (Journal)</td>
						<td class="text-right">22,120</td>
						<td class="text-right">12,333</td>
						<td class="text-right">40,495</td>
						<td class="text-right">77%</td>
					</tr>
					<tr>
						<td>DedupEndNote</td>
						<td></td>
						<td class="text-right">38,407</td>
						<td class="text-right">24,201</td>
						<td class="text-right">28,627</td>
						<td class="text-right">54%</td>
					</tr>
				</table>

				<h5>Validation</h5>

				<p>A general subset of 3647 records was manually checked (150 records without an Author, 79 with Author "Anonymous",
				the 366 articles with "phase" in the title (because of "Phase I", Phase I/II", ...)
				the rest: "Aagaard"  ... "Abbitt", "Anoob" ... "Axelrod",
				"Liu", "v Koppenfels" ... "von Woellwarth", and some others). Because replies are treated in a special way, 130 records with "reply" in the title
				which were identified as duplicates, were checked, but only for true and false positives.</p>
				<table class="table table-bordered">
					<thead>
						<tr>
							<th>Set</th>
							<th>True positive</th>
							<th>False negative</th>
							<th>Sensitivity</th>
							<th>True negative</th>
							<th>False positive</th>
							<th>Specificity</th>
						</tr>
						<tr>
							<td></td>
							<td>correctly identified duplicates</td>
							<td>missed duplicates</td>
							<td></td>
							<td>correctly identified unique records</td>
							<td>incorrectly identified as duplicates</td>
						</tr>
					</thead>
					<tbody>
						<tr>
							<td>General</td>
							<td>2781</td>
							<td>146</td>
							<td>95.0%</td>
							<td>720</td>
							<td>0</td>
							<td>100.0%</td>
						</tr>
						<tr>
							<td>Replies</td>
							<td>130</td>
							<td></td>
							<td></td>
							<td></td>
							<td>0</td>
							<td></td>
						</tr>
					</tbody>
				</table>
				
				<h4>Cannabis test database (15,216 records)</h4>
				<p>See: <a href="https://zenodo.org/record/3531487" target="blank">https://zenodo.org/record/3531487</a> and <a href="https://zenodo.org/communities/icasr/search?page=1&size=20" target="blank">https://zenodo.org/communities/icasr/search?page=1&size=20</a></p>
				<table class="table table-sm">
					<thead>
						<tr>
							<th>Tool</th>
							<th>Setting</th>
							<th class="text-right">Duplicates found</th>
							<th class="text-right">Duplicates to delete</th>
							<th class="text-right">After deduplication</th>
							<th class="text-right">% kept</th>
						</tr>
					</thead>
					<tr>
						<td>EndNote</td>
						<td>Author + Year + Title + Reference Type<br/>(default setting)</td>
						<td class="text-right">5,499</td>
						<td class="text-right">3,460</td>
						<td class="text-right">11,756</td>
						<td class="text-right">77%</td>
					</tr>
					<tr>
						<td>EndNote</td>
						<td>Author + Year + Title</td>
						<td class="text-right">5,504</td>
						<td class="text-right">3,463</td>
						<td class="text-right">11,753</td>
						<td class="text-right">77%</td>
					</tr>
					<tr>
						<td>EndNote</td>
						<td>Author + Year + Title + Secondary Title (Journal)</td>
						<td class="text-right">3,733</td>
						<td class="text-right">2,256</td>
						<td class="text-right">12,960</td>
						<td class="text-right">85%</td>
					</tr>
					<tr>
						<td>SRA Deduplicator *</td>
						<td>???</td>
						<td class="text-right">???</td>
						<td class="text-right">3,791</td>
						<td class="text-right">11,425</td>
						<td class="text-right">75%</td>
					</tr>
					<tr>
						<td>DedupEndNote</td>
						<td></td>
						<td class="text-right">6,987</td>
						<td class="text-right">4,475</td>
						<td class="text-right">10,741</td>
						<td class="text-right">71%</td>
					</tr>
				</table>
				
				<p>SRA Deduplicator: <a href="https://sr-accelerator.com/#/help/dedupe-offline" target="blank">https://sr-accelerator.com/#/help/dedupe-offline</a>.
				The Windows version on <a href="https://github.com/IEBH/sra-dedupe-ui" target="blank">https://github.com/IEBH/sra-dedupe-ui</a> (downloaded 17-7-2020)
				was used.</p>

				<p>EndNote deduplication may identify records as duplicates which aren't duplicates at all, e.g. with the most aggressive setting "Author + Year + Title":</p>
				<ul>
					<li>Different journals: <a target="blank" href="http://dx.doi.org/10.1111/ajt.14306">http://dx.doi.org/10.1111/ajt.14306</a> and <a target="blank" href="http://dx.doi.org/10.1111/petr.12972">http://dx.doi.org/10.1111/petr.12972</a></li>
					<li>Different journals: <a target="blank" href="http://dx.doi.org/10.1016/S0168-8278%2811%2960938-0">http://dx.doi.org/10.1016/S0168-8278%2811%2960938-0</a> and <a target="blank" href="10.1016/s1590-8658(11)60057-1">10.1016/s1590-8658(11)60057-1</a></li>
					<li>Same journal: <a target="blank" href="10.1002/cld.552 and 10.1002/cld.599">10.1002/cld.552 and 10.1002/cld.599</a></li>
				</ul>

				<h3 id="limitations">Limitations</h3>
				<ul>
					<li>Input file size: The maximum size of the input file is limited to 150MB.</li>
					<li>Encoding: The program assumes that the input file is encoded as UTF-8.</li>
					<li>If authors AND (all) titles AND (all) journal names for a record use a non-Latin script, results for this record may be inaccurate.</li>
					<li>The input file must be an export from ONE EndNote database: the ID fields are used internally for identifying the records, so they have to be unique.</li>
					<li>The program has been developed and tested for biomedical databases (PubMed, EMBASE, ...) and some general databases (Web of Science, Scopus).
					Deduplicating records from other databases is not garanteed to work.</li>
					<li>Records for each publication year are compared to records from the same and the following year: a record from 2016 is compared to the records from 2015 (when treating the records from
					2015) and from 2016 and 2017 (when treating the records from 2016). A PubMed ahead-of-print record from 2013 and a corresponding record from 2017 (when it was 'officially' 
					published) will not be compared (and possibly deduplicated).</li>
					<li>Bibliographic databases are not always very accurate in the starting page of a publication. Because starting page is part of the comparisons,
					DedupEndNote misses the duplicates when bibliographic databases don't agree on the starting page (and one or both records have no DOIs).</li> 
				</ul>
	        </div>
       </div>
    </div>
</body>
</html>
